# API

本文档是AI证件照项目的接口文档

## 目录

- [API](#api)
  - [目录](#目录)
  - [上传图片](#上传图片)
    - [简要描述](#简要描述)
    - [请求地址](#请求地址)
    - [请求方式](#请求方式)
    - [请求参数](#请求参数)
    - [成功响应](#成功响应)
    - [失败响应](#失败响应)
  - [预览图片](#预览图片)
    - [简要描述](#简要描述-1)
    - [请求地址](#请求地址-1)
    - [请求方式](#请求方式-1)
    - [请求参数](#请求参数-1)
    - [成功响应](#成功响应-1)
    - [失败响应](#失败响应-1)
  - [人像抠图](#人像抠图)
    - [简要描述](#简要描述-2)
    - [请求地址](#请求地址-2)
    - [请求方式](#请求方式-2)
    - [请求参数](#请求参数-2)
      - [请求头参数](#请求头参数)
      - [请求体参数](#请求体参数)
    - [成功响应](#成功响应-2)
    - [失败响应](#失败响应-2)
  - [参考](#参考)

## 上传图片

### 简要描述

将用户从本地相册选择的或用相机拍摄的人像照片上传到服务器。

### 请求地址

```bash
http://49.233.46.151:5005/ai-matting/api/v1/upload/image
```

### 请求方式

```bash
POST
```

### 请求参数

| 字段    | 必选 | 类型   | 描述     |
|-------|----|------|--------|
| image | 是  | File | 二进制图片流 |

### 成功响应

```json
{
  "code": 200,
  "data": {
    "url": "http://49.233.46.151:5005/ai-matting/api/v1/images/1639845770.jpg"
  },
  "msg": "success"
}
```

### 失败响应

```json
{
  "code": 500,
  "data": null,
  "msg": "管理员关闭了游客上传！"
}
```

## 预览图片

### 简要描述

用户将图片上传至服务器后会得到一个图片url，该接口是该url请求的响应，实现图片预览。

### 请求地址

```bash
http://49.233.46.151:5005/ai-matting/api/v1/images
```

### 请求方式

```bash
GET
```

### 请求参数

| 字段    | 必选 | 类型   | 描述     |
|-------|----|------|--------|
| imageId | 是  | String | 图片ID |

### 成功响应

一张图片。可在浏览器地址栏输入以下网址查看：
```bash
http://49.233.46.151:5005/ai-matting/api/v1/images/1639845770.jpg
```

### 失败响应

```json
{
  "code": 500,
  "data": null,
  "msg": "无效的图片ID！"
}
```

## 人像抠图

### 简要描述

对用户上传的人像图片进行抠图。

### 请求地址

```bash
http://49.233.46.151:5005/ai-matting/api/v1/matting
```

### 请求方式

```bash
POST
```

### 请求参数

#### 请求头参数

| 字段    | 必选 | 类型   | 描述     |
|-------|----|------|--------|
| token | 是  | String | 用户登录后获得的身份验证令牌 |

#### 请求体参数

| 字段    | 必选 | 类型   | 描述     |
|-------|----|------|--------|
| image | 是  | File | 二进制图片流 |

### 成功响应

```json
{
  "code": 200,
  "data": {
    "url": "http://49.233.46.151:5005/ai-matting/api/v1/images/1640020151.jpg",
    "bgRemoved_url": "http://49.233.46.151:5005/ai-matting/api/v1/images/1640020151_bgRemoved.jpg"
  },
  "msg": "success"
}
```

### 失败响应

```json
{
  "code": 500,
  "data": null,
  "msg": "管理员关闭了游客抠图！"
}
```

## 参考